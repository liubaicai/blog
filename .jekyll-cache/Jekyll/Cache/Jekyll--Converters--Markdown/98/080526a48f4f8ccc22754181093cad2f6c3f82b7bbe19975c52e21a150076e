I"†B<p>å®‰è£…</p>
<p>$sudo apt-get install squid</p>
<p><br /></p>
<p>é…ç½® squid3</p>
<p>$sudo vim /etc/squid3/squid.conf</p>
<p><br /></p>
<p>æ·»åŠ ç”¨æˆ·åéªŒè¯ï¼ˆä¸‹é¢ï¼‰&lt;/p&gt;<p><br /></p><p>å¯åŠ¨/é‡å¯ squid3</p><p>$sudo service squid3 restart</p><p><br /></p><p>æ³¨æ„ï¼š squidçš„ httpé»˜è®¤ä»£ç†ç«¯å£ä¸º 3128</p><p><br /></p><p>



          

      



                        

       

     

         <!--new top-->                         <!--new top-->           <!-- ad begin -->          

     <!-- ad end-->                      

































</p><div id="container"><div id="body"><div id="main"><div class="main"><div class="details" id="article_details"><div class="article_content" id="article_content"><!--StartFragment--><p>å®‰è£…äº†Squidåä¼šæœ‰ä¸€äº›ä¸æ˜çš„æµé‡å’ŒCPUå ç”¨95%ä»¥ä¸Šï¼Œä¼°è®¡æ˜¯å› ä¸ºæ²¡åŠ å¯†ç ï¼Œè¢«æ‰«æåˆ°ç«¯å£åè¢«æ»¥ç”¨ã€‚&lt;/p&gt;<p>æˆ‘ä»¬ç»™Squidä»£ç†æ·»åŠ ç”¨æˆ·ã€å¯†ç è®¤è¯ã€‚&lt;/p&gt;<p><span style="font-size: 18px;">1ã€å¯†ç ç”¨apache2è‡ªå¸¦çš„NCSA&nbsp;</span></p><p>å…ˆåšä¸ªå¯†ç æ¡£ï¼Œç„¶åè®¾ä¸ºä»»ä½•äººå¯è¯»ï¼š&lt;/p&gt;<div class="dp-highlighter bg_objc"><div class="bar"><div class="tools"><b>[objc]</b> <a title="view plain" class="ViewSource" href="http://blog.csdn.net/skylinethj/article/details/43837277#">view plain</a><span data-mod="popu_168"> <a title="copy" class="CopyToClipboard" href="http://blog.csdn.net/skylinethj/article/details/43837277#">copy</a></span><span data-mod="popu_169"> <a title="print" class="PrintSource" href="http://blog.csdn.net/skylinethj/article/details/43837277#">print</a></span><a title="?" class="About" href="http://blog.csdn.net/skylinethj/article/details/43837277#">?</a><span class="tracking-ad" data-mod="popu_167"><a title="åœ¨CODEä¸ŠæŸ¥çœ‹ä»£ç ç‰‡" href="https://code.csdn.net/snippets/605255" target="_blank"><img width="12" height="12" style="left: 2px; top: 1px; position: relative;" alt="åœ¨CODEä¸ŠæŸ¥çœ‹ä»£ç ç‰‡" src="https://code.csdn.net/assets/CODE_ico.png" /></a></span><span class="tracking-ad" data-mod="popu_170"><a title="æ´¾ç”Ÿåˆ°æˆ‘çš„ä»£ç ç‰‡" href="https://code.csdn.net/snippets/605255/fork" target="_blank"><img width="12" height="12" style="left: 2px; top: 2px; position: relative;" alt="æ´¾ç”Ÿåˆ°æˆ‘çš„ä»£ç ç‰‡" src="https://code.csdn.net/assets/ico_fork.svg" /></a></span></div></div><ol class="dp-objc"><li class="alt">sudo&nbsp;touch&nbsp;/etc/squid<span class="xcodenumber">3</span>/squid_passwd&nbsp;&nbsp;</li><li>sudo&nbsp;chmod&nbsp;-R&nbsp;<span class="xcodenumber">7</span><span class="xcodenumber">7</span><span class="xcodenumber">7</span>&nbsp;/etc/squid<span class="xcodenumber">3</span>/squid_passwd&nbsp;&nbsp;</li></ol></div><pre class="objc" style="display: none;" name="code" snippet_file_name="blog_20150215_1_6897288" code_snippet_id="605255">sudo touch /etc/squid3/squid_passwd
sudo chmod -R 777 /etc/squid3/squid_passwd</pre>// è¿™äº›è·¯å¾„å¯ä»¥è‡ªå®šä¹‰ï¼Œåªè¦ä¸‹é¢çš„é…ç½®èƒ½å¯¹åº”ä¸Šå°±è¡Œã€‚&lt;br&gt; ç»™å¯†ç æ–‡ä»¶æˆæƒ&lt;br&gt;<p></p><div class="dp-highlighter bg_objc"><div class="bar"><div class="tools"><b>[objc]</b> <a title="view plain" class="ViewSource" href="http://blog.csdn.net/skylinethj/article/details/43837277#">view plain</a><span data-mod="popu_168"> <a title="copy" class="CopyToClipboard" href="http://blog.csdn.net/skylinethj/article/details/43837277#">copy</a></span><span data-mod="popu_169"> <a title="print" class="PrintSource" href="http://blog.csdn.net/skylinethj/article/details/43837277#">print</a></span><a title="?" class="About" href="http://blog.csdn.net/skylinethj/article/details/43837277#">?</a><span class="tracking-ad" data-mod="popu_167"><a title="åœ¨CODEä¸ŠæŸ¥çœ‹ä»£ç ç‰‡" href="https://code.csdn.net/snippets/605255" target="_blank"><img width="12" height="12" style="left: 2px; top: 1px; position: relative;" alt="åœ¨CODEä¸ŠæŸ¥çœ‹ä»£ç ç‰‡" src="https://code.csdn.net/assets/CODE_ico.png" /></a></span><span class="tracking-ad" data-mod="popu_170"><a title="æ´¾ç”Ÿåˆ°æˆ‘çš„ä»£ç ç‰‡" href="https://code.csdn.net/snippets/605255/fork" target="_blank"><img width="12" height="12" style="left: 2px; top: 2px; position: relative;" alt="æ´¾ç”Ÿåˆ°æˆ‘çš„ä»£ç ç‰‡" src="https://code.csdn.net/assets/ico_fork.svg" /></a></span></div></div><ol class="dp-objc"><li class="alt">sudo&nbsp;htpasswd&nbsp;/etc/squid<span class="xcodenumber">3</span>/squid_passwd&nbsp;testname&nbsp;&nbsp;</li></ol></div><pre class="objc" style="display: none;" name="code" snippet_file_name="blog_20150215_2_9324950" code_snippet_id="605255">sudo htpasswd /etc/squid3/squid_passwd testname</pre><p></p><p>testname æ˜¯ä½¿ç”¨è€…åç§°ã€‚ç„¶åç³»ç»Ÿä¼šè¦æ±‚è¾“å…¥å¯†ç ã€‚&lt;/p&gt;<br /><span style="font-size: 18px;">2ã€ä¿®æ”¹squid_conf</span><br /><br />åœ¨ 337è¡Œå·¦å³ åŠ å…¥<br /><div class="dp-highlighter bg_objc"><div class="bar"><div class="tools"><b>[objc]</b> <a title="view plain" class="ViewSource" href="http://blog.csdn.net/skylinethj/article/details/43837277#">view plain</a><span data-mod="popu_168"> <a title="copy" class="CopyToClipboard" href="http://blog.csdn.net/skylinethj/article/details/43837277#">copy</a></span><span data-mod="popu_169"> <a title="print" class="PrintSource" href="http://blog.csdn.net/skylinethj/article/details/43837277#">print</a></span><a title="?" class="About" href="http://blog.csdn.net/skylinethj/article/details/43837277#">?</a><span class="tracking-ad" data-mod="popu_167"><a title="åœ¨CODEä¸ŠæŸ¥çœ‹ä»£ç ç‰‡" href="https://code.csdn.net/snippets/605255" target="_blank"><img width="12" height="12" style="left: 2px; top: 1px; position: relative;" alt="åœ¨CODEä¸ŠæŸ¥çœ‹ä»£ç ç‰‡" src="https://code.csdn.net/assets/CODE_ico.png" /></a></span><span class="tracking-ad" data-mod="popu_170"><a title="æ´¾ç”Ÿåˆ°æˆ‘çš„ä»£ç ç‰‡" href="https://code.csdn.net/snippets/605255/fork" target="_blank"><img width="12" height="12" style="left: 2px; top: 2px; position: relative;" alt="æ´¾ç”Ÿåˆ°æˆ‘çš„ä»£ç ç‰‡" src="https://code.csdn.net/assets/ico_fork.svg" /></a></span></div></div><ol class="dp-objc"><li class="alt">auth_param&nbsp;basic&nbsp;program&nbsp;/usr/lib/squid<span class="xcodenumber">3</span>/ncsa_auth&nbsp;/etc/squid<span class="xcodenumber">3</span>/squid_passwd&nbsp;&nbsp;</li></ol></div><pre class="objc" style="display: none;" name="code" snippet_file_name="blog_20150215_3_4044283" code_snippet_id="605255">auth_param basic program /usr/lib/squid3/ncsa_auth /etc/squid3/squid_passwd</pre><p>// ä¸Šé¢è¿™è¡Œéœ€è¦æ³¨æ„ï¼Œæˆ‘æäº†å¾ˆä¹…æ‰å‘ç°è¿™é‡Œå‡ºé—®é¢˜çš„ï¼Œncsa_authçš„è·¯å¾„è¦æ‰¾åˆ°è‡ªå·±å®‰è£…çš„åœ°æ–¹ã€‚ä¸€èˆ¬åœ¨/usr/lib/squid/æˆ–è€…/usr/lib/squid3/è§†ç‰ˆæœ¬è€Œå®šã€‚&lt;/p&gt;<p><br /></p>åœ¨ 720 è¡Œå·¦å³åŠ å…¥&lt;br&gt;<div class="dp-highlighter bg_objc"><div class="bar"><div class="tools"><b>[objc]</b> <a title="view plain" class="ViewSource" href="http://blog.csdn.net/skylinethj/article/details/43837277#">view plain</a><span data-mod="popu_168"> <a title="copy" class="CopyToClipboard" href="http://blog.csdn.net/skylinethj/article/details/43837277#">copy</a></span><span data-mod="popu_169"> <a title="print" class="PrintSource" href="http://blog.csdn.net/skylinethj/article/details/43837277#">print</a></span><a title="?" class="About" href="http://blog.csdn.net/skylinethj/article/details/43837277#">?</a><span class="tracking-ad" data-mod="popu_167"><a title="åœ¨CODEä¸ŠæŸ¥çœ‹ä»£ç ç‰‡" href="https://code.csdn.net/snippets/605255" target="_blank"><img width="12" height="12" style="left: 2px; top: 1px; position: relative;" alt="åœ¨CODEä¸ŠæŸ¥çœ‹ä»£ç ç‰‡" src="https://code.csdn.net/assets/CODE_ico.png" /></a></span><span class="tracking-ad" data-mod="popu_170"><a title="æ´¾ç”Ÿåˆ°æˆ‘çš„ä»£ç ç‰‡" href="https://code.csdn.net/snippets/605255/fork" target="_blank"><img width="12" height="12" style="left: 2px; top: 2px; position: relative;" alt="æ´¾ç”Ÿåˆ°æˆ‘çš„ä»£ç ç‰‡" src="https://code.csdn.net/assets/ico_fork.svg" /></a></span></div></div><ol class="dp-objc"><li class="alt">acl&nbsp;ncsa_users&nbsp;proxy_auth&nbsp;REQUIRED&nbsp;&nbsp;</li></ol></div><pre class="objc" style="display: none;" name="code" snippet_file_name="blog_20150215_4_5416328" code_snippet_id="605255">acl ncsa_users proxy_auth REQUIRED</pre><br />åœ¨ 793è¡Œå·¦å³ åŠ å…¥<br /><div class="dp-highlighter bg_objc"><div class="bar"><div class="tools"><b>[objc]</b> <a title="view plain" class="ViewSource" href="http://blog.csdn.net/skylinethj/article/details/43837277#">view plain</a><span data-mod="popu_168"> <a title="copy" class="CopyToClipboard" href="http://blog.csdn.net/skylinethj/article/details/43837277#">copy</a></span><span data-mod="popu_169"> <a title="print" class="PrintSource" href="http://blog.csdn.net/skylinethj/article/details/43837277#">print</a></span><a title="?" class="About" href="http://blog.csdn.net/skylinethj/article/details/43837277#">?</a><span class="tracking-ad" data-mod="popu_167"><a title="åœ¨CODEä¸ŠæŸ¥çœ‹ä»£ç ç‰‡" href="https://code.csdn.net/snippets/605255" target="_blank"><img width="12" height="12" style="left: 2px; top: 1px; position: relative;" alt="åœ¨CODEä¸ŠæŸ¥çœ‹ä»£ç ç‰‡" src="https://code.csdn.net/assets/CODE_ico.png" /></a></span><span class="tracking-ad" data-mod="popu_170"><a title="æ´¾ç”Ÿåˆ°æˆ‘çš„ä»£ç ç‰‡" href="https://code.csdn.net/snippets/605255/fork" target="_blank"><img width="12" height="12" style="left: 2px; top: 2px; position: relative;" alt="æ´¾ç”Ÿåˆ°æˆ‘çš„ä»£ç ç‰‡" src="https://code.csdn.net/assets/ico_fork.svg" /></a></span></div></div><ol class="dp-objc"><li class="alt">http_acecss&nbsp;allow&nbsp;ncsa_users&nbsp;&nbsp;</li></ol></div><pre class="objc" style="display: none;" name="code" snippet_file_name="blog_20150215_5_5675558" code_snippet_id="605255">http_acecss allow ncsa_users</pre><br />æŠŠ843ï¼Œ844è¡Œçš„<br /><div class="dp-highlighter bg_objc"><div class="bar"><div class="tools"><b>[objc]</b> <a title="view plain" class="ViewSource" href="http://blog.csdn.net/skylinethj/article/details/43837277#">view plain</a><span data-mod="popu_168"> <a title="copy" class="CopyToClipboard" href="http://blog.csdn.net/skylinethj/article/details/43837277#">copy</a></span><span data-mod="popu_169"> <a title="print" class="PrintSource" href="http://blog.csdn.net/skylinethj/article/details/43837277#">print</a></span><a title="?" class="About" href="http://blog.csdn.net/skylinethj/article/details/43837277#">?</a><span class="tracking-ad" data-mod="popu_167"><a title="åœ¨CODEä¸ŠæŸ¥çœ‹ä»£ç ç‰‡" href="https://code.csdn.net/snippets/605255" target="_blank"><img width="12" height="12" style="left: 2px; top: 1px; position: relative;" alt="åœ¨CODEä¸ŠæŸ¥çœ‹ä»£ç ç‰‡" src="https://code.csdn.net/assets/CODE_ico.png" /></a></span><span class="tracking-ad" data-mod="popu_170"><a title="æ´¾ç”Ÿåˆ°æˆ‘çš„ä»£ç ç‰‡" href="https://code.csdn.net/snippets/605255/fork" target="_blank"><img width="12" height="12" style="left: 2px; top: 2px; position: relative;" alt="æ´¾ç”Ÿåˆ°æˆ‘çš„ä»£ç ç‰‡" src="https://code.csdn.net/assets/ico_fork.svg" /></a></span></div></div><ol class="dp-objc"><li class="alt">http_access&nbsp;allow&nbsp;localnet&nbsp;,&nbsp;http_access&nbsp;allos&nbsp;localhostå±è”½æ‰ã€‚&amp;nbsp;&nbsp;</li></ol></div><pre class="objc" style="display: none;" name="code" snippet_file_name="blog_20150215_6_4331605" code_snippet_id="605255">http_access allow localnet , http_access allos localhostå±è”½æ‰ã€‚&lt;/pre&gt;<br /><span style="font-size: 18px;">3ã€é‡æ–°å¯åŠ¨squid3</span><br /><div class="dp-highlighter bg_objc"><div class="bar"><div class="tools"><b>[objc]</b> <a title="view plain" class="ViewSource" href="http://blog.csdn.net/skylinethj/article/details/43837277#">view plain</a><span data-mod="popu_168"> <a title="copy" class="CopyToClipboard" href="http://blog.csdn.net/skylinethj/article/details/43837277#">copy</a></span><span data-mod="popu_169"> <a title="print" class="PrintSource" href="http://blog.csdn.net/skylinethj/article/details/43837277#">print</a></span><a title="?" class="About" href="http://blog.csdn.net/skylinethj/article/details/43837277#">?</a><span class="tracking-ad" data-mod="popu_167"><a title="åœ¨CODEä¸ŠæŸ¥çœ‹ä»£ç ç‰‡" href="https://code.csdn.net/snippets/605255" target="_blank"><img width="12" height="12" style="left: 2px; top: 1px; position: relative;" alt="åœ¨CODEä¸ŠæŸ¥çœ‹ä»£ç ç‰‡" src="https://code.csdn.net/assets/CODE_ico.png" /></a></span><span class="tracking-ad" data-mod="popu_170"><a title="æ´¾ç”Ÿåˆ°æˆ‘çš„ä»£ç ç‰‡" href="https://code.csdn.net/snippets/605255/fork" target="_blank"><img width="12" height="12" style="left: 2px; top: 2px; position: relative;" alt="æ´¾ç”Ÿåˆ°æˆ‘çš„ä»£ç ç‰‡" src="https://code.csdn.net/assets/ico_fork.svg" /></a></span></div></div><ol class="dp-objc"><li class="alt">sudo&nbsp;service&nbsp;squid<span class="xcodenumber">3</span>&nbsp;--full-restart&nbsp;æˆ–è€…&amp;nbsp;&lt;span&nbsp;style=<span class="string">"font-family:&nbsp;monospace;&nbsp;line-height:&nbsp;18px;&nbsp;background-color:&nbsp;rgb(239,&nbsp;243,&nbsp;251);"</span>&gt;sudo&nbsp;/etc/init<span class="xcodeconstants">.d</span>/squid&nbsp;restart&lt;/span&gt;&nbsp;&nbsp;</li></ol></div><pre class="objc" style="display: none;" name="code" snippet_file_name="blog_20150215_7_5147242" code_snippet_id="605255">sudo service squid3 --full-restart æˆ–è€… &lt;span style="font-family: monospace; line-height: 18px; background-color: rgb(239, 243, 251);"&gt;sudo /etc/init.d/squid restart&lt;/span&gt;</pre><p>æˆ–è€…è®©é…ç½®ç”Ÿæ•ˆå°±è¡Œ</p><p></p><div class="dp-highlighter bg_objc"><div class="bar"><div class="tools"><b>[objc]</b> <a title="view plain" class="ViewSource" href="http://blog.csdn.net/skylinethj/article/details/43837277#">view plain</a><span data-mod="popu_168"> <a title="copy" class="CopyToClipboard" href="http://blog.csdn.net/skylinethj/article/details/43837277#">copy</a></span><span data-mod="popu_169"> <a title="print" class="PrintSource" href="http://blog.csdn.net/skylinethj/article/details/43837277#">print</a></span><a title="?" class="About" href="http://blog.csdn.net/skylinethj/article/details/43837277#">?</a><span class="tracking-ad" data-mod="popu_167"><a title="åœ¨CODEä¸ŠæŸ¥çœ‹ä»£ç ç‰‡" href="https://code.csdn.net/snippets/605255" target="_blank"><img width="12" height="12" style="left: 2px; top: 1px; position: relative;" alt="åœ¨CODEä¸ŠæŸ¥çœ‹ä»£ç ç‰‡" src="https://code.csdn.net/assets/CODE_ico.png" /></a></span><span class="tracking-ad" data-mod="popu_170"><a title="æ´¾ç”Ÿåˆ°æˆ‘çš„ä»£ç ç‰‡" href="https://code.csdn.net/snippets/605255/fork" target="_blank"><img width="12" height="12" style="left: 2px; top: 2px; position: relative;" alt="æ´¾ç”Ÿåˆ°æˆ‘çš„ä»£ç ç‰‡" src="https://code.csdn.net/assets/ico_fork.svg" /></a></span></div></div><ol class="dp-objc"><li class="alt">sudo&nbsp;service&nbsp;squid<span class="xcodenumber">3</span>&nbsp;-k&nbsp;reconfig&nbsp;&nbsp;</li></ol></div><pre class="objc" style="display: none;" name="code" snippet_file_name="blog_20150215_8_5439492" code_snippet_id="605255">sudo service squid3 -k reconfig</pre><br /><p></p><span style="font-size: 18px;">4ã€è¿›é˜¶&lt;/span&gt;<br /> ä¸€äº›æ›´å®Œå–„çš„å‚æ•°ï¼Œå½“ç„¶ä¸æ˜¯å¿…é¡»çš„å¯ä»¥ä¸éœ€è¦&lt;br&gt;<div class="dp-highlighter bg_objc"><div class="bar"><div class="tools"><b>[objc]</b> <a title="view plain" class="ViewSource" href="http://blog.csdn.net/skylinethj/article/details/43837277#">view plain</a><span data-mod="popu_168"> <a title="copy" class="CopyToClipboard" href="http://blog.csdn.net/skylinethj/article/details/43837277#">copy</a></span><span data-mod="popu_169"> <a title="print" class="PrintSource" href="http://blog.csdn.net/skylinethj/article/details/43837277#">print</a></span><a title="?" class="About" href="http://blog.csdn.net/skylinethj/article/details/43837277#">?</a><span class="tracking-ad" data-mod="popu_167"><a title="åœ¨CODEä¸ŠæŸ¥çœ‹ä»£ç ç‰‡" href="https://code.csdn.net/snippets/605255" target="_blank"><img width="12" height="12" style="left: 2px; top: 1px; position: relative;" alt="åœ¨CODEä¸ŠæŸ¥çœ‹ä»£ç ç‰‡" src="https://code.csdn.net/assets/CODE_ico.png" /></a></span><span class="tracking-ad" data-mod="popu_170"><a title="æ´¾ç”Ÿåˆ°æˆ‘çš„ä»£ç ç‰‡" href="https://code.csdn.net/snippets/605255/fork" target="_blank"><img width="12" height="12" style="left: 2px; top: 2px; position: relative;" alt="æ´¾ç”Ÿåˆ°æˆ‘çš„ä»£ç ç‰‡" src="https://code.csdn.net/assets/ico_fork.svg" /></a></span></div></div><ol class="dp-objc"><li class="alt">auth_param&nbsp;basic&nbsp;children&nbsp;<span class="xcodenumber">5</span>&nbsp;&nbsp;</li><li>auth_param&nbsp;basic&nbsp;realm&nbsp;Squid&nbsp;proxy-caching&nbsp;web&nbsp;server&nbsp;&nbsp;</li><li class="alt">auth_param&nbsp;basic&nbsp;credentialsttl&nbsp;<span class="xcodenumber">2</span>&nbsp;hours&nbsp;&nbsp;</li><li>auth_param&nbsp;basic&nbsp;casesensitive&nbsp;off &nbsp;</li></ol></div><!--EndFragment-->&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;
</span></pre></p></p></p></p></p></div></div></div></div></div></div></p>
:ET