I"¿<pre class="prettyprint lang-cs">public class Notification
    {
        #region Property
        private string ChannelName { get; set; }
        private string ServiceName { get; set; }
        private string AddUrl { get; set; }//å¼€å¯æ¨é€å‘æœåŠ¡å™¨å‘é€å¾®è½¯è¿”å›çš„åœ°å€
        private string DelUrl { get; set; }//å…³é—­æ¨é€æ—¶é€šçŸ¥è‡ªå·±çš„æœåŠ¡å™¨
        private string UserAgent { get; set; }
        private HttpNotificationChannel NotificationChannel { get; set; }
        #endregion

        public Notification(string channelName, string seviceName, string addUrl, string delUrl, string userAgent)
        {
            ChannelName = channelName;
            ServiceName = seviceName;
            AddUrl = addUrl;
            DelUrl = delUrl;
            UserAgent = userAgent;
        }

        #region method
        public void Connect()
        {
            try
            {
                NotificationChannel = HttpNotificationChannel.Find(ChannelName);
                if (NotificationChannel != null)
                {
                    NotificationChannel.Close();
                    NotificationChannel.Dispose();
                }
                NotificationChannel = new HttpNotificationChannel(ChannelName, ServiceName);
                SetChannelEvents();
                NotificationChannel.Open();
                NotificationChannel.BindToShellToast();
            }
            catch (Exception ex)
            {
                Debug.WriteLine(ex.Message);
            }
        }

        public void Disconnect()
        {
            try
            {
                NotificationChannel = HttpNotificationChannel.Find(ChannelName);

                if (NotificationChannel != null)
                {
                    try
                    {
                        new HttpHelper(UserAgent).request(string.Format(DelUrl + "&amp;url=" + Uri.EscapeDataString(NotificationChannel.ChannelUri.ToString())), null, null);
                    }
                    catch { }
                    if (NotificationChannel.IsShellToastBound)
                    {
                        NotificationChannel.UnbindToShellToast();
                    }
                    NotificationChannel.Close();
                    NotificationChannel.Dispose();
                }
            }
            catch (Exception ex)
            {
                Debug.WriteLine(ex.Message);
            }
            finally
            {
                NotificationChannel = null;
            }
        }

        private void SetChannelEvents()
        {
            NotificationChannel.ChannelUriUpdated += new EventHandler&lt;NotificationChannelUriEventArgs&gt;(httpChannel_ChannelUriUpdated);
            NotificationChannel.ErrorOccurred += new EventHandler&lt;NotificationChannelErrorEventArgs&gt;(httpChannel_ErrorOccurred);
            NotificationChannel.HttpNotificationReceived += new EventHandler&lt;HttpNotificationEventArgs&gt;(httpChannel_HttpNotificationReceived); 
            NotificationChannel.ShellToastNotificationReceived += new EventHandler&lt;NotificationEventArgs&gt;(httpChannel_ShellToastNotificationReceived);
        }
        #endregion

        #region Privates

        //Toastæ¨é€
        private void httpChannel_ShellToastNotificationReceived(object sender, NotificationEventArgs e)
        {
        }
        //RAWæ¨é€
        private void httpChannel_HttpNotificationReceived(object sender, HttpNotificationEventArgs e)
        {
        }
        //ç”³è¯·æ¨é€apié”™è¯¯
        private void httpChannel_ErrorOccurred(object sender, NotificationChannelErrorEventArgs e)
        {
        }
        //ç”³è¯·æ¨é€apiæˆåŠŸ
        private void httpChannel_ChannelUriUpdated(object sender, NotificationChannelUriEventArgs e)
        {
            try
            {
                string url = string.Format(AddUrl + "?url=" + Uri.EscapeDataString(e.ChannelUri.ToString()));
                new HttpHelper(UserAgent).request(url, null, null);
            }
            catch { }
        }
        #endregion</pre>
<pre class="prettyprint lang-cs">HttpHelperç±»æ˜¯ä¸€ä¸ªHTTPè¯·æ±‚çš„è¾…åŠ©ç±» å‚è§ï¼š&lt;a href="http://blog.liubaicai.com/?p=67"&gt;http://blog.liu<span id="__kindeditor_bookmark_start_0__"></span>baicai.com/?p=67&lt;/a&gt;</pre>
<pre class="prettyprint lang-cs">æœåŠ¡å™¨ç«¯è®¾ç½®å‚è§Demoï¼š&lt;a href="http://files.cnblogs.com/liubaicai/WebCast20101203_Demo.zip"&gt;http://files.cnblogs.com/liubaicai/WebCast20101203_Demo.zip&lt;/a&gt;</pre>
:ET