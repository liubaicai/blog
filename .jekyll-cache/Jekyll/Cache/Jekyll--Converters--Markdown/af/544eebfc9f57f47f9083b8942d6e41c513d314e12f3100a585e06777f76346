I"á<p>æ¯”å¦‚æœ‰ä¸€ä¸ªæ·»åŠ appçš„åŠŸèƒ½ï¼Œå®ƒçš„é¡µé¢hamlæ˜¯è¿™æ ·çš„</p>
<pre class="lang:xhtml decode:true">!!! XML
%html
  %head
    %title PromoteAppManager
  %body{:bgcolor =&gt; "white"}
    %h1{:style =&gt; "font-family:Calibri,Arial,YaHei"} New
    %hr
    %form{:align =&gt; "center",:name =&gt; "input",:action =&gt; "/promoteapp/manager/new",:method =&gt; "post"}
      %table
        %tr
          %td AppId:
          %td
            %input{:type =&gt; "text",:name =&gt; "appid"}
        %tr
          %td Title:
          %td
            %input{:type =&gt; "text",:name =&gt; "title"}
        %tr
          %td Content:
          %td
            %input{:type =&gt; "text",:name =&gt; "content"}
        %tr
          %td Logo:
          %td
            %input{:type =&gt; "text",:name =&gt; "logo"}
        %tr
          %td Status:
          %td
            %input{:type =&gt; "text",:name =&gt; "_status"}
        %tr
          %td
          %td
            %input{:align =&gt; "left",:type =&gt; "submit",:value =&gt; "Submit"}
    %hr</pre>
<p>å½“ç‚¹å‡»SubmitæŒ‰é’®æ—¶å€™ï¼Œé€šè¿‡formè¡¨å•æäº¤åˆ°/promoteapp/manager/newï¼ŒæŒ‡å®špostæ–¹å¼ã€‚</p>

<p><img class="alignnone wp-image-589 size-full" src="http://www.liubaicai.net/wp-content/uploads/2015/11/QQæˆªå›¾20151123094542-e1448243350671.png" alt="QQæˆªå›¾20151123094542" width="325" height="334" /></p>

<p>è·¯ç”±æ¥æ”¶å¤„ï¼š</p>
<pre class="lang:ruby decode:true ">get '/promoteapp/manager/new' do
	haml :promoteappmanagernew
end

post '/promoteapp/manager/new' do
  postdata = URI.decode_www_form_component(request.body.read)
  params = URI.decode_www_form(postdata)
  model = PromoteApp.new
  model.appid = params.assoc("appid").last
  model.title = params.assoc("title").last
  model.content = params.assoc("content").last
  model.logo = params.assoc("logo").last
  model._status = params.assoc("_status").last
  model.save
  redirect to('/promoteapp/manager')
end</pre>
<p>URI.decode_www_form_componentï¼šurlè§£ç </p>

<p>URI.decode_www_form ï¼šå°†formè¡¨å•å‚æ•°è½¬æˆæ•°ç»„å½¢å¼</p>

<p>å–åˆ°æ•°æ®åï¼Œé€šè¿‡ActiveRecordæ–¹å¼ä¿å­˜æ•°æ®å</p>

<p>é€šè¿‡redirect to(â€˜/promoteapp/managerâ€™)é‡å®šä½åˆ°æŸé¡µé¢</p>

<p>äºæ˜¯ä¹å°±å®Œæˆäº†ä¸€æ¬¡è¡¨å•æäº¤å’Œå¤„ç†çš„æµç¨‹</p>
:ET