I" <h1>æ³¨:å¯é€šè¿‡launchrocketç®¡ç†</h1>
<p><br /></p>
<pre class="ql-syntax" spellcheck="false">brew cask install launchrocket
</pre>
<p><br /></p>
<h1>å®‰è£…</h1>
<p>brew å®‰è£… postgresql ï¼š</p>
<pre class="ql-syntax" spellcheck="false">$ brew install postgresql
</pre>
<p><br /></p>
<p>æŸ¥çœ‹å®‰è£…çš„ç‰ˆæœ¬ï¼š</p>
<pre class="ql-syntax" spellcheck="false">$ pg_ctl -V
pg_ctl (PostgreSQL) 9.3.5
</pre>
<p>å®‰è£…æˆåŠŸä¹‹åï¼Œå®‰è£…è·¯å¾„ä¸ºï¼š/usr/local/var/postgres</p>
<p>æ¥ä¸‹æ¥ï¼Œåˆå§‹åŒ–æ•°æ®åº“ï¼š</p>
<pre class="ql-syntax" spellcheck="false">$ initdb /usr/local/var/postgres
The files belonging to this database system will be owned by user "june".
This user must also own the server process.

The database cluster will be initialized with locale "zh_CN.UTF-8".
The default database encoding has accordingly been set to "UTF8".
initdb: could not find suitable text search configuration for locale "zh_CN.UTF-8"
The default text search configuration will be set to "simple".

Data page checksums are disabled.

creating directory /usr/local/var/postgres ... ok
creating subdirectories ... ok
selecting default max_connections ... 100
selecting default shared_buffers ... 128MB
creating configuration files ... ok
creating template1 database in /usr/local/var/postgres/base/1 ... ok
initializing pg_authid ... ok
initializing dependencies ... ok
creating system views ... ok
loading system objects' descriptions ... ok
creating collations ... ok
creating conversions ... ok
creating dictionaries ... ok
setting privileges on built-in objects ... ok
creating information schema ... ok
loading PL/pgSQL server-side language ... ok
vacuuming database template1 ... ok
copying template1 to template0 ... ok
copying template1 to postgres ... ok
syncing data to disk ... ok

WARNING: enabling "trust" authentication for local connections
You can change this by editing pg_hba.conf or using the option -A, or
--auth-local and --auth-host, the next time you run initdb.

Success. You can now start the database server using:

    postgres -D /usr/local/var/postgres
or
    pg_ctl -D /usr/local/var/postgres -l logfile start
</pre>
<p>é…ç½®å¼€æœºç™»é™†ï¼ˆå¯é€‰ï¼‰ï¼š</p>
<pre class="ql-syntax" spellcheck="false">$ mkdir -p ~/Library/LaunchAgents
$ cp /usr/local/Cellar/postgresql/9.3.5_1/homebrew.mxcl.postgresql.plist ~/Library/LaunchAgents/
$ launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.postgresql.plist
</pre>
<p>æ‰‹åŠ¨å¯åŠ¨ postgresql</p>
<pre class="ql-syntax" spellcheck="false">$ pg_ctl -D /usr/local/var/postgres -l /usr/local/var/postgres/server.log start
</pre>
<p><br /></p>
<p>æŸ¥çœ‹çŠ¶æ€ï¼š</p>
<pre class="ql-syntax" spellcheck="false">pg_ctl -D /usr/local/var/postgres -l /usr/local/var/postgres/server.log status
</pre>
<p><br /></p>
<p>åœæ­¢ï¼š</p>
<pre class="ql-syntax" spellcheck="false">$ pg_ctl -D /usr/local/var/postgres -l /usr/local/var/postgres/server.log stop -s -m fast
</pre>
<p><br /></p>
<p>æŸ¥çœ‹è¿›ç¨‹ï¼š</p>
<pre class="ql-syntax" spellcheck="false">$ ps auxwww | grep postgres
june            56126   0.0  0.0  2432772    644 s000  S+    5:01ä¸‹åˆ   0:00.00 grep postgres
june            56058   0.0  0.0  2467360    584   ??  Ss    5:00ä¸‹åˆ   0:00.00 postgres: stats collector process
june            56057   0.0  0.0  2611808   1744   ??  Ss    5:00ä¸‹åˆ   0:00.00 postgres: autovacuum launcher process
june            56056   0.0  0.0  2611676    696   ??  Ss    5:00ä¸‹åˆ   0:00.00 postgres: wal writer process
june            56055   0.0  0.0  2611676    944   ??  Ss    5:00ä¸‹åˆ   0:00.01 postgres: writer process
june            56054   0.0  0.0  2611676    756   ??  Ss    5:00ä¸‹åˆ   0:00.00 postgres: checkpointer process
june            56044   0.0  0.2  2611676  14096 s000  S     5:00ä¸‹åˆ   0:00.02 /usr/local/Cellar/postgresql/9.3.5_1/bin/postgres -D /usr/local/var/postgres
</pre>
<p>åˆ›å»ºç”¨æˆ·å’Œæ•°æ®åº“ï¼š</p>
<pre class="ql-syntax" spellcheck="false">#createuser will prompt you for a password, enter it twice.
$ createuser  -P test
$ createdb -Otest -Eutf8 test_db
$ psql
postgres=# GRANT ALL PRIVILEGES ON test TO test;
postgres=# \q
</pre>
<p>è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ï¼š</p>
<pre class="ql-syntax" spellcheck="false">$ psql -U test test_db -h localhost -W
</pre>
<p><br /></p>
<p>å¦‚æœå‡ºç°&nbsp;<code style="background-color: rgb(254, 251, 243);">FATAL: Ident authentication failed for user</code>ï¼Œæ˜¯å› ä¸ºï¼š</p>
<blockquote>This is because by default PostgreSQL uses â€˜identâ€™ authentication i.e it checks if the username exists on the system. You need to change authentication mode to â€˜trustâ€™ as we do not want to add a system user. Modify the settings in â€œpg_hba.confâ€ to use â€˜trustâ€™ authentication.</blockquote>
<p>è¯·ä¿®æ”¹ /usr/local/var/postgres/pg_hba.conf ä¸ºï¼š</p>
<pre class="ql-syntax" spellcheck="false">host    all             all             127.0.0.1/32            trust
# IPv6 local connections:
host    all             all             ::1/128                 trust
</pre>
<p>å®‰è£… pgadminï¼Œä¸‹è½½åœ°å€ï¼š<a href="http://www.pgadmin.org/download/macosx.php" target="_blank" style="color: rgb(37, 97, 194);">http://www.pgadmin.org/download/macosx.php</a></p>
<h1>å¸è½½</h1>
<pre class="ql-syntax" spellcheck="false">$ brew uninstall postgres
</pre>
<p><br /></p>
<p>å¦‚æœé…ç½®äº†å¼€æœºç™»é™†ï¼š</p>
<pre class="ql-syntax" spellcheck="false">$ launchctl unload -w ~/Library/LaunchAgents/homebrew.mxcl.postgresql.plist
$ rm -rf ~/Library/LaunchAgents/homebrew.mxcl.postgresql.plist
</pre>
<p><br /></p>
:ET