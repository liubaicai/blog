I"Ê	<p>Active Record æ˜¯Â &lt;a href=â€http://guides.ruby-china.org/getting_started.html#the-mvc-architectureâ€&gt;MVC&lt;/a&gt;Â ä¸­çš„ Mï¼ˆæ¨¡å‹ï¼‰ï¼Œå¤„ç†æ•°æ®å’Œä¸šåŠ¡é€»è¾‘ã€‚Active Record è´Ÿè´£åˆ›å»ºå’Œä½¿ç”¨éœ€è¦æŒä¹…å­˜å…¥æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚Active Record å®ç°äº† Active Record æ¨¡å¼ï¼Œæ˜¯ä¸€ç§å¯¹è±¡å…³ç³»æ˜ å°„ç³»ç»Ÿã€‚</p>

<p>ä½¿ç”¨æ–¹å¼ï¼š</p>
<h3>åŠ è½½ActiveRecordé…ç½®</h3>
<pre class="lang:ruby decode:true">#ActiveRecord::Base.establish_connection(:adapter =&gt; "mysql2",
#:host =&gt; "localhost", :database =&gt; "mysql",
#:username =&gt; "root", :password =&gt; "root")
dbconfig = YAML.load(File.open('config/database.yml'))['production']&amp;nbsp;
ActiveRecord::Base.establish_connection(dbconfig)
</pre>
<p>adapteræŒ‡å®šäº†è¿æ¥æ—¶çš„é©±åŠ¨ï¼Œå¦‚sqlite,mysqlç­‰</p>
<h3>å»ºç«‹ç›¸åº”çš„ç±»</h3>
<pre class="lang:ruby decode:true">class PromoteApp &lt; ActiveRecord::Base
	self.table_name = "promote_app"
	self.primary_key = "_id"
end</pre>
<p>å»ºç«‹çš„ç±»åå’Œæ•°æ®åº“åæœ€å¥½ç¬¦åˆç›¸åº”çš„è§„èŒƒï¼Œè¿™æ ·å°±èƒ½è‡ªåŠ¨å¯¹åº”ä¸Šï¼Œå¦åˆ™éœ€è¦æŒ‡å®štable_nameï¼Œå¦‚æœä¸»é”®ä¸æ˜¯idï¼Œè¿˜éœ€è¦æ‰‹åŠ¨æŒ‡å®šä¸»é”®ã€‚</p>
<pre class="lang:sh decode:true">#æ•°æ®è¡¨åï¼šå¤æ•°ï¼Œä¸‹åˆ’çº¿åˆ†éš”å•è¯ï¼ˆä¾‹å¦‚ book_clubsï¼‰
#æ¨¡å‹ç±»åï¼šå•æ•°ï¼Œæ¯ä¸ªå•è¯çš„é¦–å­—æ¯å¤§å†™ï¼ˆä¾‹å¦‚ BookClubï¼‰&lt;/pre&gt;
<h3>å¢åˆ æ”¹æŸ¥</h3>
<h4>æ–°å¢æ•°æ®</h4>
<pre class="lang:ruby decode:true">user = User.create(name: "David", occupation: "Code Artist")
#æˆ–è€…
user = User.new
user.name = "David"
user.occupation = "Code Artist"
user.save</pre>
<h4>æŸ¥è¯¢æ•°æ®</h4>
<pre class="lang:ruby decode:true"># return a collection with all users
users = User.all

# return the first user
user = User.first

# return the first user named David
david = User.find_by(name: 'David')

# find all users named David who are Code Artists and sort by created_at
# in reverse chronological order
users = User.where(name: 'David', occupation: 'Code Artist').order('created_at DESC')

#æŒ‰created_atå€’å™æ’åˆ—,ä»ç¬¬11ä¸ªæ•°æ®å¼€å§‹å–5ä¸ª
users = User.order("created_at DESC").limit(5).offset(10)</pre>
<h4>ä¿®æ”¹æ•°æ®</h4>
<pre class="lang:ruby decode:true">user = User.find_by(name: 'David')
user.name = 'Dave'
user.save
#æˆ–
user = User.find_by(name: 'David')
user.update(name: 'Dave')</pre>
<h4>åˆ é™¤æ•°æ®</h4>
<pre class="lang:ruby decode:true ">user = User.find_by(name: 'David')
user.destroy</pre>
æ›´å¤šä¿¡æ¯:http://guides.ruby-china.org/active_record_basics.html
</pre>
:ET