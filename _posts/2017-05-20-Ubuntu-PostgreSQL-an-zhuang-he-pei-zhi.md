---
layout:     post
title:      "Ubuntu PostgreSQL安装和配置"
date:       2017-05-20 12:38:16 UTC
author:     "baicai"
catalog: true
tags:
    - 存档
---

<h1 id="autoid-0-0-0" style="margin-top: 10px; margin-bottom: 10px; font-size: 28px; font-weight: bold; line-height: 1.5; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif;">一、安装</h1><h2 id="autoid-1-0-0" style="margin-top: 10px; margin-bottom: 10px; font-size: 21px; font-weight: bold; line-height: 1.5; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif;">1、安装</h2><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">使用如下命令，会自动安装最新版，这里为9.5</p><div class="cnblogs_code" style="margin-top: 5px; margin-bottom: 5px; margin-left: 30px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><pre style="margin-bottom: 0px; padding: 0px; white-space: pre-wrap; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.5 !important;">sudo</span> apt-get <span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.5 !important;">install</span> postgresql</pre></div><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">安装完成后，默认会：</p><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">（1）创建名为"postgres"的Linux用户</p><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">（2）创建名为"postgres"、不带密码的默认数据库账号作为数据库管理员</p><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">（3）创建名为"postgres"的表</p><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">安装完成后的一些默认信息如下：</p><p style="margin-top: 10px; margin-right: auto; margin-left: 60px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">config /etc/postgresql/9.5/main&nbsp;<br style="margin: 0px; padding: 0px;">data /var/lib/postgresql/9.5/main&nbsp;<br style="margin: 0px; padding: 0px;">locale en_US.UTF-8&nbsp;<br style="margin: 0px; padding: 0px;">socket /var/run/postgresql&nbsp;<br style="margin: 0px; padding: 0px;">port 5432</p><h2 id="autoid-1-1-0" style="margin-top: 10px; margin-bottom: 10px; font-size: 21px; font-weight: bold; line-height: 1.5; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif;">2、psql命令</h2><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">安装完后会有PostgreSQL的客户端psql，通过&nbsp;<span class="cnblogs_code" style="margin: 5px 0px; padding: 3px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.5 !important;">sudo</span>&nbsp;-u postgres psql</span>&nbsp;进入，提示符变成：&nbsp;<span class="cnblogs_code" style="margin: 5px 0px; padding: 3px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;">postgres=#&nbsp;</span>&nbsp;</p><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">在这里可用执行SQL语句和psql的基本命令。可用的基本命令如下：</p><div class="cnblogs_code" style="margin-top: 5px; margin-bottom: 5px; margin-left: 30px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><div class="cnblogs_code_toolbar" style="margin-top: 5px;"><span class="cnblogs_code_copy" style="margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.5 !important;"><a title="复制代码" style="margin: 0px; padding: 0px; color: black; text-decoration-line: underline; background-color: rgb(245, 245, 245) !important; border: none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" title="点击全屏显示" style="margin: 0px; padding: 0px; max-width: 900px; border-width: initial !important; border-style: none !important;"></a></span></div><pre style="margin-bottom: 0px; padding: 0px; white-space: pre-wrap; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.5 !important;">\password：设置密码
\q：退出
\h：查看SQL命令的解释，比如\h </span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.5 !important;">select</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.5 !important;">。
\</span>?<span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.5 !important;">：查看psql命令列表。
<strong style="margin: 0px; padding: 0px;">\l：列出所有数据库。</strong>
\c [database_name]：连接其他数据库。
\d：列出当前数据库的所有表格。
\d [table_name]：列出某一张表格的结构。
<strong style="margin: 0px; padding: 0px;">\</strong></span><strong style="margin: 0px; padding: 0px;"><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.5 !important;">du</span></strong><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.5 !important;"><strong style="margin: 0px; padding: 0px;">：列出所有用户。</strong>
\e：打开文本编辑器。
\conninfo：列出当前数据库和连接的信息。</span></pre><div class="cnblogs_code_toolbar" style="margin-top: 5px;"><span class="cnblogs_code_copy" style="margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.5 !important;"><a title="复制代码" style="margin: 0px; padding: 0px; color: black; text-decoration-line: underline; background-color: rgb(245, 245, 245) !important; border: none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" title="点击全屏显示" style="margin: 0px; padding: 0px; max-width: 900px; border-width: initial !important; border-style: none !important;"></a></span></div></div><p style="margin-top: 10px; margin-right: auto; margin-left: auto; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">&nbsp;</p><h1 id="autoid-1-2-0" style="margin-top: 10px; margin-bottom: 10px; font-size: 28px; font-weight: bold; line-height: 1.5; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif;">二、修改数据库默认账号的密码</h1><h2 id="autoid-2-0-0" style="margin-top: 10px; margin-bottom: 10px; font-size: 21px; font-weight: bold; line-height: 1.5; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif;">1、登录</h2><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">使用psql命令登录数据库的命令为：</p><div class="cnblogs_code" style="margin-top: 5px; margin-bottom: 5px; margin-left: 30px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><pre style="margin-bottom: 0px; padding: 0px; white-space: pre-wrap; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;">psql -U dbuser -d exampledb -h <span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); line-height: 1.5 !important;">127.0</span>.<span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); line-height: 1.5 !important;">0.1</span> -p <span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); line-height: 1.5 !important;">5432</span></pre></div><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">上面命令的参数含义如下：-U指定用户，-d指定数据库，-h指定服务器，-p指定端口。</p><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">输入上面命令以后，系统会提示输入dbuser用户的密码。</p><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;"><span style="margin: 0px; padding: 0px; color: rgb(255, 0, 0);"><strong style="margin: 0px; padding: 0px;">psql命令存在简写形式</strong></span>：</p><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">如果当前Linux系统用户，同时也是PostgreSQL用户，则可以省略用户名（-U参数的部分）</p><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">如果PostgreSQL内部还存在与当前系统用户同名的数据库，则数据库名也可以省略。</p><h2 id="autoid-2-1-0" style="margin-top: 10px; margin-bottom: 10px; font-size: 21px; font-weight: bold; line-height: 1.5; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif;">2、修改默认管理员账号的密码</h2><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">以Linux用户"postgres"的身份（此时只有该用户有psql命令）执行psql客户端，进入该客户端的提示符界面（这里系统用户名、数据库用户名、数据库名都为postgres，故可采用简写形式）</p><div class="cnblogs_code" style="margin-top: 5px; margin-bottom: 5px; margin-left: 30px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><pre style="margin-bottom: 0px; padding: 0px; white-space: pre-wrap; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.5 !important;">sudo</span> -u postgres psql</pre><p style="margin-bottom: 0px; padding: 0px; white-space: pre-wrap; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><br></p><p style="margin-bottom: 0px; padding: 0px; white-space: pre-wrap; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;">或者 <span style="background-color: rgb(245, 242, 240); color: rgb(17, 17, 17); font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 16px; letter-spacing: -0.12px; word-spacing: 2.4px;">sudo su - postgres 切换到</span><span style="background-color: rgb(245, 242, 240); color: rgb(17, 17, 17); font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; font-size: 16px; letter-spacing: -0.12px; word-spacing: 2.4px;">postgres用户</span></p></div><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;"><img src="http://images2015.cnblogs.com/blog/568153/201607/568153-20160705161113436-353184245.png" alt="" title="点击全屏显示" style="margin: 0px; padding: 0px; max-width: 900px;"></p><div class="cnblogs_code" style="margin-top: 5px; margin-bottom: 5px; margin-left: 30px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><pre style="margin-bottom: 0px; padding: 0px; white-space: pre-wrap; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;">postgres=# alter user postgres with password <span style="margin: 0px; padding: 0px; color: rgb(128, 0, 0); line-height: 1.5 !important;">'</span><span style="margin: 0px; padding: 0px; color: rgb(128, 0, 0); line-height: 1.5 !important;">123456</span><span style="margin: 0px; padding: 0px; color: rgb(128, 0, 0); line-height: 1.5 !important;">';</span></pre></div><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">这样，管理员"postgres"的密码就为"123456"。</p><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">退出psql客户端命令：\q</p><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">若要删除该管理员的密码，则可用命令：sudo -u postgres psql -d postgres</p><p style="margin-top: 10px; margin-right: auto; margin-left: auto; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">&nbsp;</p><h1 id="autoid-2-2-0" style="margin-top: 10px; margin-bottom: 10px; font-size: 28px; font-weight: bold; line-height: 1.5; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif;">三、修改Linux用户的密码</h1><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">这个其实与安装postgresql关系不大。</p><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">以Linux用户"postgres"为例，对其运行passwd命令：</p><div class="cnblogs_code" style="margin-top: 5px; margin-bottom: 5px; margin-left: 30px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><pre style="margin-bottom: 0px; padding: 0px; white-space: pre-wrap; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;">zsm@ubuntu:/etc/postgresql/<span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); line-height: 1.5 !important;">9.5</span>/main$ <span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.5 !important;">sudo</span> -u postgres <span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.5 !important;">passwd</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.5 !important;"> //也可以 </span>sudo&nbsp;passwd&nbsp;postgres</pre><pre style="margin-bottom: 0px; padding: 0px; white-space: pre-wrap; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.5 !important;">Changing password </span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.5 !important;">for</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.5 !important;"> postgres.
(current) UNIX password: 
Enter new UNIX password: 
Retype new UNIX password: 
</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.5 !important;">passwd</span>: password updated successfully</pre></div><p style="margin-top: 10px; margin-right: auto; margin-left: auto; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">&nbsp;</p><h1 id="autoid-3-0-0" style="margin-top: 10px; margin-bottom: 10px; font-size: 28px; font-weight: bold; line-height: 1.5; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif;">四、配置数据库以允许远程连接访问</h1><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">&nbsp;安装完成后，默认只能本地才能连接数据库，其他机子访问不了，需要进行配置。</p><h2 id="autoid-4-0-0" style="margin-top: 10px; margin-bottom: 10px; font-size: 21px; font-weight: bold; line-height: 1.5; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif;">1、修改监听地址</h2><div class="cnblogs_code" style="margin-top: 5px; margin-bottom: 5px; margin-left: 30px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><pre style="margin-bottom: 0px; padding: 0px; white-space: pre-wrap; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.5 !important;">sudo</span> gedit /etc/postgresql/<span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); line-height: 1.5 !important;">9.5</span>/main/postgresql.conf </pre></div><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">将 #listen_addresses = 'localhost' 的注释去掉并改为 listen_addresses = '*'&nbsp;</p><h2 id="autoid-4-1-0" style="margin-top: 10px; margin-bottom: 10px; font-size: 21px; font-weight: bold; line-height: 1.5; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif;">2、修改可访问用户的IP段</h2><div class="cnblogs_code" style="margin-top: 5px; margin-bottom: 5px; margin-left: 30px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><pre style="margin-bottom: 0px; padding: 0px; white-space: pre-wrap; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.5 !important;">sudo</span> gedit /etc/postgresql/<span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); line-height: 1.5 !important;">9.5</span>/main/pg_hba.conf </pre></div><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">在文件末尾添加：&nbsp;<span class="cnblogs_code" style="margin: 5px 0px; padding: 3px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;">host all all&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); line-height: 1.5 !important;">0.0</span>.<span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); line-height: 1.5 !important;">0.0</span>&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); line-height: 1.5 !important;">0.0</span>.<span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); line-height: 1.5 !important;">0.0</span>&nbsp;md5</span>&nbsp;，表示运行任何IP连接</p><h2 id="autoid-4-2-0" style="margin-top: 10px; margin-bottom: 10px; font-size: 21px; font-weight: bold; line-height: 1.5; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif;">3、重启数据库</h2><div class="cnblogs_code" style="margin-top: 5px; margin-bottom: 5px; margin-left: 30px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><pre style="margin-bottom: 0px; padding: 0px; white-space: pre-wrap; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.5 !important;">sudo</span> /etc/init.d/postgresql restart</pre></div><p style="margin-top: 10px; margin-right: auto; margin-left: auto; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">&nbsp;</p><p style="margin-top: 10px; margin-right: auto; margin-left: auto; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">&nbsp;</p><p style="margin-top: 10px; margin-right: auto; margin-left: auto; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">其他：管理用户、建立数据库等</p><h1 id="autoid-4-3-0" style="margin-top: 10px; margin-bottom: 10px; font-size: 28px; font-weight: bold; line-height: 1.5; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif;">五、添加新用户和新数据库</h1><h2 id="autoid-5-0-0" style="margin-top: 10px; margin-bottom: 10px; font-size: 21px; font-weight: bold; line-height: 1.5; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif;">法一：使用PostgreSQL客户端psql</h2><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">运行系统用户"postgres"的psql命令，进入客户端：</p><div class="cnblogs_code" style="margin-top: 5px; margin-bottom: 5px; margin-left: 30px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><pre style="margin-bottom: 0px; padding: 0px; white-space: pre-wrap; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.5 !important;">sudo</span> -u postgres psql</pre></div><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">创建用户"xiaozhang"并设置密码：</p><div class="cnblogs_code" style="margin-top: 5px; margin-bottom: 5px; margin-left: 30px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><pre style="margin-bottom: 0px; padding: 0px; white-space: pre-wrap; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;">postgres=# create user xiaozhang with password <span style="margin: 0px; padding: 0px; color: rgb(128, 0, 0); line-height: 1.5 !important;">'</span><span style="margin: 0px; padding: 0px; color: rgb(128, 0, 0); line-height: 1.5 !important;">123456</span><span style="margin: 0px; padding: 0px; color: rgb(128, 0, 0); line-height: 1.5 !important;">'</span>;</pre></div><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">创建数据库exampledb，所有者为xiaozhang：</p><div class="cnblogs_code" style="margin-top: 5px; margin-bottom: 5px; margin-left: 30px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><pre style="margin-bottom: 0px; padding: 0px; white-space: pre-wrap; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;">postgres=# create database exampledb owner xiaozhang;</pre></div><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">将exampledb数据库的所有权限赋予xiaozhang，否则xiaozhang只能登录psql，没有任何数据库操作权限：</p><div class="cnblogs_code" style="margin-top: 5px; margin-bottom: 5px; margin-left: 30px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><pre style="margin-bottom: 0px; padding: 0px; white-space: pre-wrap; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;">grant all privileges on database exampledb to xiaozhang;</pre></div><h2 id="autoid-5-1-0" style="margin-top: 10px; margin-bottom: 10px; font-size: 21px; font-weight: bold; line-height: 1.5; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif;">法二：使用shell命令行</h2><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">安装PostgreSQL后提供了createuser和createdb命令行程序。</p><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">首先创建数据库用户"xiaozhang1"，并指定为超级用户：</p><div class="cnblogs_code" style="margin-top: 5px; margin-bottom: 5px; margin-left: 30px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><pre style="margin-bottom: 0px; padding: 0px; white-space: pre-wrap; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.5 !important;">sudo</span> -u postgres createuser --superuser xiaozhang1;</pre></div><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">接着登录psql控制台设置其密码后退出：</p><div class="cnblogs_code" style="margin-top: 5px; margin-bottom: 5px; margin-left: 30px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><div class="cnblogs_code_toolbar" style="margin-top: 5px;"><span class="cnblogs_code_copy" style="margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.5 !important;"><a title="复制代码" style="margin: 0px; padding: 0px; color: black; text-decoration-line: underline; background-color: rgb(245, 245, 245) !important; border: none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" title="点击全屏显示" style="margin: 0px; padding: 0px; max-width: 900px; border-width: initial !important; border-style: none !important;"></a></span></div><pre style="margin-bottom: 0px; padding: 0px; white-space: pre-wrap; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><span style="margin: 0px; padding: 0px; color: rgb(0, 255, 0); line-height: 1.5 !important;"><strong style="margin: 0px; padding: 0px;">zsm@ubuntu:~$ sudo -</strong></span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.5 !important;"><span style="margin: 0px; padding: 0px; color: rgb(0, 255, 0); line-height: 1.5 !important;"><strong style="margin: 0px; padding: 0px;">u postgres psql</strong></span>
psql (</span><span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); line-height: 1.5 !important;">9.5</span>.<span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); line-height: 1.5 !important;">3</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.5 !important;">)
Type </span><span style="margin: 0px; padding: 0px; color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="margin: 0px; padding: 0px; color: rgb(128, 0, 0); line-height: 1.5 !important;">help</span><span style="margin: 0px; padding: 0px; color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span> <span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.5 !important;">for</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.5 !important;"> help.

<span style="margin: 0px; padding: 0px; color: rgb(0, 255, 0); line-height: 1.5 !important;"><strong style="margin: 0px; padding: 0px;">postgres</strong></span></span><span style="margin: 0px; padding: 0px; color: rgb(0, 255, 0); line-height: 1.5 !important;"><strong style="margin: 0px; padding: 0px;">=</strong></span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.5 !important;"><span style="margin: 0px; padding: 0px; color: rgb(0, 255, 0); line-height: 1.5 !important;"><strong style="margin: 0px; padding: 0px;"># \password xiaozhang1;</strong></span>
Enter new password: 
Enter it again: 
<strong style="margin: 0px; padding: 0px;"><span style="margin: 0px; padding: 0px; color: rgb(0, 255, 0); line-height: 1.5 !important;">postgres</span></strong></span><strong style="margin: 0px; padding: 0px;"><span style="margin: 0px; padding: 0px; color: rgb(0, 255, 0); line-height: 1.5 !important;">=# \q</span></strong></pre><div class="cnblogs_code_toolbar" style="margin-top: 5px;"><span class="cnblogs_code_copy" style="margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.5 !important;"><a title="复制代码" style="margin: 0px; padding: 0px; color: black; text-decoration-line: underline; background-color: rgb(245, 245, 245) !important; border: none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" title="点击全屏显示" style="margin: 0px; padding: 0px; max-width: 900px; border-width: initial !important; border-style: none !important;"></a></span></div></div><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">然后在shell命令行下创建数据库并指定所有者：</p><div class="cnblogs_code" style="margin-top: 5px; margin-bottom: 5px; margin-left: 30px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><pre style="margin-bottom: 0px; padding: 0px; white-space: pre-wrap; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.5 !important;">sudo</span> -u postgres createdb -O xiaozhang1 exampledb1;</pre></div><h2 id="autoid-5-2-0" style="margin-top: 10px; margin-bottom: 10px; font-size: 21px; font-weight: bold; line-height: 1.5; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif;">法三：使用paadmin3以管理员连接数据库后创建</h2><p style="margin-top: 10px; margin-right: auto; margin-left: auto; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">&nbsp;</p><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">经过法一、法二操作后，执行&nbsp;<span class="cnblogs_code" style="margin: 5px 0px; padding: 3px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;">&nbsp;postgres=# \<span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.5 !important;">du</span>&nbsp;</span>&nbsp;得到用户列表如下：</p><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;"><img src="http://images2015.cnblogs.com/blog/568153/201607/568153-20160705210410905-435276311.png" alt="" title="点击全屏显示" style="margin: 0px; padding: 0px; max-width: 900px;"></p><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">执行&nbsp;<span class="cnblogs_code" style="margin: 5px 0px; padding: 3px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;">postgres=# \l</span>&nbsp;得到数据库列表如下：</p><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;"><img src="http://images2015.cnblogs.com/blog/568153/201607/568153-20160705210530155-1820129960.png" alt="" width="679" height="183" title="点击全屏显示" style="margin: 0px; padding: 0px; max-width: 900px;"></p><p style="margin-top: 10px; margin-right: auto; margin-left: 30px; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">若要删除用户（如删除xiaozhang）可先&nbsp;<span class="cnblogs_code" style="margin: 5px 0px; padding: 3px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;">postgres=# drop database example;</span>&nbsp;再&nbsp;<span class="cnblogs_code" style="margin: 5px 0px; padding: 3px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;">postgres=# drop user xiaozhang;</span>&nbsp;。</p><h1 id="autoid-5-3-0" style="margin-top: 10px; margin-bottom: 10px; font-size: 28px; font-weight: bold; line-height: 1.5; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif;">六、基本数据库操作命令</h1><div class="cnblogs_code" style="margin-top: 5px; margin-bottom: 5px; margin-left: 30px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><div class="cnblogs_code_toolbar" style="margin-top: 5px;"><span class="cnblogs_code_copy" style="margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.5 !important;"><a title="复制代码" style="margin: 0px; padding: 0px; color: black; text-decoration-line: underline; background-color: rgb(245, 245, 245) !important; border: none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" title="点击全屏显示" style="margin: 0px; padding: 0px; max-width: 900px; border-width: initial !important; border-style: none !important;"></a></span></div><pre style="margin-bottom: 0px; padding: 0px; white-space: pre-wrap; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.5 !important;"># 创建新表 
CREATE TABLE user_tbl(name VARCHAR(</span><span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); line-height: 1.5 !important;">20</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.5 !important;">), signup_date DATE);
# 插入数据 
INSERT INTO user_tbl(name, signup_date) VALUES(</span><span style="margin: 0px; padding: 0px; color: rgb(128, 0, 0); line-height: 1.5 !important;">'</span><span style="margin: 0px; padding: 0px; color: rgb(128, 0, 0); line-height: 1.5 !important;">张三</span><span style="margin: 0px; padding: 0px; color: rgb(128, 0, 0); line-height: 1.5 !important;">'</span>, <span style="margin: 0px; padding: 0px; color: rgb(128, 0, 0); line-height: 1.5 !important;">'</span><span style="margin: 0px; padding: 0px; color: rgb(128, 0, 0); line-height: 1.5 !important;">2013-12-22</span><span style="margin: 0px; padding: 0px; color: rgb(128, 0, 0); line-height: 1.5 !important;">'</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.5 !important;">);
# 选择记录 
SELECT </span>*<span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.5 !important;"> FROM user_tbl;
# 更新数据 
UPDATE user_tbl set name </span>= <span style="margin: 0px; padding: 0px; color: rgb(128, 0, 0); line-height: 1.5 !important;">'</span><span style="margin: 0px; padding: 0px; color: rgb(128, 0, 0); line-height: 1.5 !important;">李四</span><span style="margin: 0px; padding: 0px; color: rgb(128, 0, 0); line-height: 1.5 !important;">'</span> WHERE name = <span style="margin: 0px; padding: 0px; color: rgb(128, 0, 0); line-height: 1.5 !important;">'</span><span style="margin: 0px; padding: 0px; color: rgb(128, 0, 0); line-height: 1.5 !important;">张三</span><span style="margin: 0px; padding: 0px; color: rgb(128, 0, 0); line-height: 1.5 !important;">'</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.5 !important;">;
# 删除记录 
DELETE FROM user_tbl WHERE name </span>= <span style="margin: 0px; padding: 0px; color: rgb(128, 0, 0); line-height: 1.5 !important;">'</span><span style="margin: 0px; padding: 0px; color: rgb(128, 0, 0); line-height: 1.5 !important;">李四</span><span style="margin: 0px; padding: 0px; color: rgb(128, 0, 0); line-height: 1.5 !important;">'</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.5 !important;"> ;
# 添加栏位 
ALTER TABLE user_tbl ADD email VARCHAR(</span><span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); line-height: 1.5 !important;">40</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 1.5 !important;">);
# 更新结构 
ALTER TABLE user_tbl ALTER COLUMN signup_date SET NOT NULL;
# 更名栏位 
ALTER TABLE user_tbl RENAME COLUMN signup_date TO signup;
# 删除栏位 
ALTER TABLE user_tbl DROP COLUMN email;
# 表格更名 
ALTER TABLE user_tbl RENAME TO backup_tbl;
# 删除表格 
DROP TABLE IF EXISTS backup_tbl;</span></pre><div class="cnblogs_code_toolbar" style="margin-top: 5px;"><span class="cnblogs_code_copy" style="margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.5 !important;"><a title="复制代码" style="margin: 0px; padding: 0px; color: black; text-decoration-line: underline; background-color: rgb(245, 245, 245) !important; border: none !important;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" title="点击全屏显示" style="margin: 0px; padding: 0px; max-width: 900px; border-width: initial !important; border-style: none !important;"></a></span></div></div><p style="margin-top: 10px; margin-right: auto; margin-left: auto; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">&nbsp;</p><h1 id="autoid-6-0-0" style="margin-top: 10px; margin-bottom: 10px; font-size: 28px; font-weight: bold; line-height: 1.5; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif;">七、参考资料</h1><p style="margin-top: 10px; margin-right: auto; margin-left: auto; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">[一~四]：<a href="http://blog.sina.com.cn/s/blog_6af33caa0100ypck.html" target="_blank" style="margin: 0px; padding: 0px; color: black; text-decoration-line: underline;">http://blog.sina.com.cn/s/blog_6af33caa0100ypck.html</a></p><p style="margin-top: 10px; margin-right: auto; margin-left: auto; padding: 0px; font-family: Verdana, Arial, Helvetica, sans-serif;">[五~末]：<a href="http://www.ruanyifeng.com/blog/2013/12/getting_started_with_postgresql.html" target="_blank" style="margin: 0px; padding: 0px; color: black; text-decoration-line: underline;">http://www.ruanyifeng.com/blog/2013/12/getting_started_with_postgresql.html</a></p>